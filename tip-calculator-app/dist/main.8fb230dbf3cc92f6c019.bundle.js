(()=>{"use strict";var e=function(e,t){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"afterend",n="".concat(e,"Error");null===(r=document.querySelector("#".concat(n)))||void 0===r||r.remove(),document.querySelector("#".concat(e)).insertAdjacentHTML(o,'<span id="'.concat(n,'" class="error-message">').concat(t,"</span>"))},t=function(e){var t;null===(t=document.querySelector("#".concat(e,"Error")))||void 0===t||t.remove()},r=function(e,t){var r=document.querySelector("#".concat(t));return"success"===e&&(r.classList.remove("error"),r.classList.add("success")),"error"===e&&(r.classList.remove("success"),r.classList.add("error")),!1},o=function(){var e,t,r,o,n=Number.parseFloat(null===(e=document.querySelector('input[name="tip"]:checked'))||void 0===e?void 0:e.value),u=Number.parseFloat(null===(t=document.querySelector("#tip-custom"))||void 0===t?void 0:t.value),c=Number.parseFloat(null===(r=document.querySelector("#bill"))||void 0===r?void 0:r.value),i=Number.parseFloat(null===(o=document.querySelector("#number-of-people"))||void 0===o?void 0:o.value);return!(isNaN(n)&&isNaN(u)&&isNaN(c)&&isNaN(i))},n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"tip-form",t=document.querySelector("#".concat(e)),r=t.querySelector('input[type="reset"]');o()?r.removeAttribute("disabled"):r.setAttribute("disabled","disabled")};document.addEventListener("DOMContentLoaded",(function(){var o=document.querySelector("#bill"),u=document.querySelector("#number-of-people"),c=document.querySelectorAll('input[name="tip"]'),i=document.querySelector("#tip-custom"),a=document.querySelector("#tip-form"),s=document.querySelector("#tip-amount-per-person"),l=document.querySelector("#total-per-person"),d=document.querySelector("#tipFieldSet"),m=function(){var e,t,r,n,c,i,a,d=(e=o.value,i=Number.parseFloat(null===(n=document.querySelector('input[name="tip"]:checked'))||void 0===n?void 0:n.value),a=Number.parseFloat(null===(c=document.querySelector("#tip-custom"))||void 0===c?void 0:c.value),t=Number.isNaN(a)?Number.isNaN(i)?0:i:a,r=u.value,Number.isNaN(Number.parseFloat(e))||Number.isNaN(Number.parseFloat(r))||Number.isNaN(Number.parseFloat(t))||0===t?0:e*(t/100)/r);s.textContent="$".concat(d.toFixed(2)),l.textContent="$".concat(function(e,t,r){return Number.isNaN(Number.parseFloat(e))||Number.isNaN(Number.parseFloat(t))||Number.isNaN(Number.parseFloat(r))||0===r?0:e/t+r}(o.value,u.value,d).toFixed(2))};u.addEventListener("input",m),o.addEventListener("input",m),i.addEventListener("input",m),c.forEach((function(e){e.addEventListener("input",(function(){i.value="",m(),n()}))})),a.addEventListener("reset",(function(){s.textContent="$0.00",l.textContent="$0.00",function(){var e=document.querySelector("#tip-custom"),t=document.querySelector("#bill"),r=document.querySelector("#number-of-people");e.classList.remove("success","error"),t.classList.remove("success","error"),r.classList.remove("success","error"),document.querySelectorAll(".error-message").forEach((function(e){return e.remove()}))}(),a.querySelector('input[type="reset"]').setAttribute("disabled","disabled")})),a.querySelectorAll("input").forEach((function(e){e.addEventListener("input",(function(){n()}))})),i.addEventListener("input",(function(){c.forEach((function(e){e.checked=!1}))})),i.addEventListener("input",(function(){var o=d.getAttribute("id"),n=i.getAttribute("id");i.validity.valid?(r("success",n),t(o)):(r("error",n),e(o,i.validationMessage,"beforeend"))})),o.addEventListener("input",(function(){var n=o.getAttribute("id");o.validity.valid?(r("success",n),t(n)):(r("error",n),e(n,o.validationMessage))})),u.addEventListener("input",(function(){var o=u.getAttribute("id");u.validity.valid?(r("success",o),t(o)):(r("error",o),e(o,u.validationMessage))}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWMsVUFBV1QsR0FDekJRLEVBQW9CMkMsS0FKcEIxQyxFQUFjLFFBQVNULEdBQ3ZCRCxFQUFvQm9ELEVBQVluQixFQUFldUIsa0JBQW1CLGlCQU8xRW5DLEVBQVVTLGlCQUFpQixTQUFTLFdBQ2hDLElBQU03QixFQUFVb0IsRUFBVWdDLGFBQWEsTUFFbENoQyxFQUFVaUMsU0FBU0MsT0FJcEI3QyxFQUFjLFVBQVdULEdBQ3pCUSxFQUFvQlIsS0FKcEJTLEVBQWMsUUFBU1QsR0FDdkJELEVBQW9CQyxFQUFTb0IsRUFBVW1DLHVCQU8vQ2xDLEVBQW9CUSxpQkFBaUIsU0FBUyxXQUMxQyxJQUFNN0IsRUFBVXFCLEVBQW9CK0IsYUFBYSxNQUU1Qy9CLEVBQW9CZ0MsU0FBU0MsT0FJOUI3QyxFQUFjLFVBQVdULEdBQ3pCUSxFQUFvQlIsS0FKcEJTLEVBQWMsUUFBU1QsR0FDdkJELEVBQW9CQyxFQUFTcUIsRUFBb0JrQywyQiIsInNvdXJjZXMiOlsid2VicGFjazovL3Byb2plY3QtYm9pbGVycGxhdGUvLi9zcmMvanMvbW9kdWxlcy9oZWxwZXIuanMiLCJ3ZWJwYWNrOi8vcHJvamVjdC1ib2lsZXJwbGF0ZS8uL3NyYy9qcy9tYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBnZXRUaXAgPSAoKSA9PiB7XHJcbiAgICBsZXQgdGlwUmFkaW8gPSBOdW1iZXIucGFyc2VGbG9hdChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwidGlwXCJdOmNoZWNrZWQnKT8udmFsdWUpO1xyXG4gICAgbGV0IHRpcEN1c3RvbSA9IE51bWJlci5wYXJzZUZsb2F0KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aXAtY3VzdG9tJyk/LnZhbHVlKTtcclxuXHJcbiAgICBpZiAoIU51bWJlci5pc05hTih0aXBDdXN0b20pKSB7XHJcbiAgICAgICAgcmV0dXJuIHRpcEN1c3RvbTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIU51bWJlci5pc05hTih0aXBSYWRpbykpIHtcclxuICAgICAgICByZXR1cm4gdGlwUmFkaW87XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIDA7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBnZXRUaXBBbW91bnRQZXJQZXJzb24gPSAoYmlsbCwgdGlwLCBwZW9wbGUpID0+IHtcclxuICAgIGlmIChOdW1iZXIuaXNOYU4oTnVtYmVyLnBhcnNlRmxvYXQoYmlsbCkpIHx8IE51bWJlci5pc05hTihOdW1iZXIucGFyc2VGbG9hdChwZW9wbGUpKSB8fCAoTnVtYmVyLmlzTmFOKE51bWJlci5wYXJzZUZsb2F0KHRpcCkpIHx8IHRpcCA9PT0gMCkpIHtcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuICAgIHJldHVybiAoYmlsbCAqICh0aXAgLyAxMDApKSAvIHBlb3BsZTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGdldFRvdGFsUGVyUGVyc29uID0gKGJpbGwsIHBlb3BsZSwgdGlwQW1vdW50ICkgPT4ge1xyXG4gICAgaWYgKE51bWJlci5pc05hTihOdW1iZXIucGFyc2VGbG9hdChiaWxsKSkgfHwgTnVtYmVyLmlzTmFOKE51bWJlci5wYXJzZUZsb2F0KHBlb3BsZSkpIHx8IChOdW1iZXIuaXNOYU4oTnVtYmVyLnBhcnNlRmxvYXQodGlwQW1vdW50KSkgfHwgdGlwQW1vdW50ID09PSAwKSkge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAoIGJpbGwgLyBwZW9wbGUgKSArICB0aXBBbW91bnQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBkaXNwbGF5RXJyb3JNZXNzYWdlID0gKGZpZWxkSWQsIG1lc3NhZ2UsIHBvc2l0aW9uID0gJ2FmdGVyZW5kJykgPT4ge1xyXG4gICAgY29uc3QgZXJyb3JJRCA9IGAke2ZpZWxkSWR9RXJyb3JgO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7ZXJyb3JJRH1gKT8ucmVtb3ZlKCk7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtmaWVsZElkfWApLmluc2VydEFkamFjZW50SFRNTChwb3NpdGlvbiwgYDxzcGFuIGlkPVwiJHtlcnJvcklEfVwiIGNsYXNzPVwiZXJyb3ItbWVzc2FnZVwiPiR7bWVzc2FnZX08L3NwYW4+YCApO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgcmVtb3ZlRXJyb3JNZXNzYWdlcyA9IGZpZWxkSWQgPT4ge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7ZmllbGRJZH1FcnJvcmApPy5yZW1vdmUoKTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHNldEZpZWxkU3RhdGUgPSAoc3RhdGUsIGZpZWxkSWQpID0+IHtcclxuICAgIGNvbnN0IGZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7ZmllbGRJZH1gKTtcclxuXHJcbiAgICBpZiAoc3RhdGUgPT09ICdzdWNjZXNzJykge1xyXG4gICAgICAgIGZpZWxkLmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJyk7XHJcbiAgICAgICAgZmllbGQuY2xhc3NMaXN0LmFkZCgnc3VjY2VzcycpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChzdGF0ZSA9PT0gJ2Vycm9yJykge1xyXG4gICAgICAgIGZpZWxkLmNsYXNzTGlzdC5yZW1vdmUoJ3N1Y2Nlc3MnKTtcclxuICAgICAgICBmaWVsZC5jbGFzc0xpc3QuYWRkKCdlcnJvcicpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGlzRm9ybUVtcHR5ID0gKCkgPT4ge1xyXG4gICAgbGV0IHRpcFJhZGlvID0gTnVtYmVyLnBhcnNlRmxvYXQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cInRpcFwiXTpjaGVja2VkJyk/LnZhbHVlKTtcclxuICAgIGxldCB0aXBDdXN0b20gPSBOdW1iZXIucGFyc2VGbG9hdChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGlwLWN1c3RvbScpPy52YWx1ZSk7XHJcbiAgICBjb25zdCBiaWxsRmllbGQgPSBOdW1iZXIucGFyc2VGbG9hdChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYmlsbCcpPy52YWx1ZSk7XHJcbiAgICBjb25zdCBudW1iZXJPZlBlb3BsZUZpZWxkID0gTnVtYmVyLnBhcnNlRmxvYXQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI251bWJlci1vZi1wZW9wbGUnKT8udmFsdWUpO1xyXG5cclxuICAgIHJldHVybiAhaXNOYU4odGlwUmFkaW8pIHx8ICFpc05hTih0aXBDdXN0b20pIHx8ICFpc05hTihiaWxsRmllbGQpIHx8ICFpc05hTihudW1iZXJPZlBlb3BsZUZpZWxkKTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHVwZGF0ZUZvcm1TdGF0ZSA9IChmb3JtSWQgPSAndGlwLWZvcm0nKSA9PiB7XHJcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7Zm9ybUlkfWApO1xyXG4gICAgY29uc3QgZm9ybVJlc2V0ID0gZm9ybS5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwicmVzZXRcIl0nKTtcclxuXHJcbiAgICBpZiAoaXNGb3JtRW1wdHkoKSkge1xyXG4gICAgICAgIGZvcm1SZXNldC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZvcm1SZXNldC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCByZXNldEZvcm0gPSAoKSA9PiB7XHJcbiAgICBsZXQgdGlwQ3VzdG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RpcC1jdXN0b20nKTtcclxuICAgIGNvbnN0IGJpbGxGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNiaWxsJyk7XHJcbiAgICBjb25zdCBudW1iZXJPZlBlb3BsZUZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI251bWJlci1vZi1wZW9wbGUnKTtcclxuXHJcbiAgICB0aXBDdXN0b20uY2xhc3NMaXN0LnJlbW92ZSgnc3VjY2VzcycsICdlcnJvcicpO1xyXG4gICAgYmlsbEZpZWxkLmNsYXNzTGlzdC5yZW1vdmUoJ3N1Y2Nlc3MnLCAnZXJyb3InKTtcclxuICAgIG51bWJlck9mUGVvcGxlRmllbGQuY2xhc3NMaXN0LnJlbW92ZSgnc3VjY2VzcycsICdlcnJvcicpO1xyXG5cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lcnJvci1tZXNzYWdlJykuZm9yRWFjaChlcnJvciA9PiBlcnJvci5yZW1vdmUoKSk7XHJcbn0iLCJpbXBvcnQge1xyXG4gICAgZ2V0VGlwQW1vdW50UGVyUGVyc29uLFxyXG4gICAgZ2V0VG90YWxQZXJQZXJzb24sXHJcbiAgICBnZXRUaXAsXHJcbiAgICBkaXNwbGF5RXJyb3JNZXNzYWdlLFxyXG4gICAgcmVtb3ZlRXJyb3JNZXNzYWdlcyxcclxuICAgIHNldEZpZWxkU3RhdGUsXHJcbiAgICB1cGRhdGVGb3JtU3RhdGUsXHJcbiAgICByZXNldEZvcm1cclxufSBmcm9tICcuL21vZHVsZXMvaGVscGVyLmpzJztcclxuaW1wb3J0ICcuLi9zY3NzL21haW4uc2Nzcyc7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xyXG4gICAgY29uc3QgYmlsbEZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JpbGwnKTtcclxuICAgIGNvbnN0IG51bWJlck9mUGVvcGxlRmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbnVtYmVyLW9mLXBlb3BsZScpO1xyXG4gICAgY29uc3QgdGlwUmFkaW9GaWVsZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFtuYW1lPVwidGlwXCJdJyk7XHJcbiAgICBjb25zdCB0aXBDdXN0b21GaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aXAtY3VzdG9tJyk7XHJcbiAgICBjb25zdCB0aXBGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RpcC1mb3JtJyk7XHJcbiAgICBjb25zdCB0aXBBbW91bnREaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGlwLWFtb3VudC1wZXItcGVyc29uJyk7XHJcbiAgICBjb25zdCB0b3RhbERpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b3RhbC1wZXItcGVyc29uJyk7XHJcbiAgICBjb25zdCB0aXBGaWVsZHNldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aXBGaWVsZFNldCcpO1xyXG5cclxuICAgIGNvbnN0IGRpc3BsYXlSZXN1bHRzID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRpcEFtb3VudCA9IGdldFRpcEFtb3VudFBlclBlcnNvbihiaWxsRmllbGQudmFsdWUsIGdldFRpcCgpLCBudW1iZXJPZlBlb3BsZUZpZWxkLnZhbHVlKTtcclxuICAgICAgICB0aXBBbW91bnREaXYudGV4dENvbnRlbnQgPSBgJCR7dGlwQW1vdW50LnRvRml4ZWQoMil9YDtcclxuICAgICAgICB0b3RhbERpdi50ZXh0Q29udGVudCA9IGAkJHtnZXRUb3RhbFBlclBlcnNvbihiaWxsRmllbGQudmFsdWUsIG51bWJlck9mUGVvcGxlRmllbGQudmFsdWUsIHRpcEFtb3VudCkudG9GaXhlZCgyKX1gO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCByZXNldFJlc3VsdHMgPSAoKSA9PiB7XHJcbiAgICAgICAgdGlwQW1vdW50RGl2LnRleHRDb250ZW50ID0gJyQwLjAwJztcclxuICAgICAgICB0b3RhbERpdi50ZXh0Q29udGVudCA9ICckMC4wMCc7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGlzcGxheSByZXN1bHRzIHdoZW5ldmVyIGZvcm0gZmllbGRzIGNoYW5nZS5cclxuICAgIG51bWJlck9mUGVvcGxlRmllbGQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBkaXNwbGF5UmVzdWx0cyk7XHJcbiAgICBiaWxsRmllbGQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBkaXNwbGF5UmVzdWx0cyk7XHJcbiAgICB0aXBDdXN0b21GaWVsZC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGRpc3BsYXlSZXN1bHRzKTtcclxuICAgIHRpcFJhZGlvRmllbGRzLmZvckVhY2godGlwUmFkaW9GaWVsZCA9PiB7XHJcbiAgICAgICAgdGlwUmFkaW9GaWVsZC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICAgICAgdGlwQ3VzdG9tRmllbGQudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgICAgICBkaXNwbGF5UmVzdWx0cygpO1xyXG4gICAgICAgICAgICB1cGRhdGVGb3JtU3RhdGUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFJlc2V0IHJlc3VsdHMgb24gZm9ybSByZXNldC5cclxuICAgIHRpcEZvcm0uYWRkRXZlbnRMaXN0ZW5lcigncmVzZXQnLCAoKSA9PiB7XHJcbiAgICAgICAgcmVzZXRSZXN1bHRzKCk7XHJcbiAgICAgICAgcmVzZXRGb3JtKCk7XHJcbiAgICAgICAgdGlwRm9ybS5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwicmVzZXRcIl0nKS5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0JykuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHVwZGF0ZUZvcm1TdGF0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGlwQ3VzdG9tRmllbGQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgdGlwUmFkaW9GaWVsZHMuZm9yRWFjaCh0aXBSYWRpb0ZpZWxkID0+IHtcclxuICAgICAgICAgICAgdGlwUmFkaW9GaWVsZC5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aXBDdXN0b21GaWVsZC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICBjb25zdCBmaWVsZHNldElkID0gdGlwRmllbGRzZXQuZ2V0QXR0cmlidXRlKCdpZCcpO1xyXG4gICAgICAgIGNvbnN0IGZpZWxkSWQgPSB0aXBDdXN0b21GaWVsZC5nZXRBdHRyaWJ1dGUoJ2lkJyk7XHJcbiAgICAgICAgaWYgKCF0aXBDdXN0b21GaWVsZC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAgICAgICBzZXRGaWVsZFN0YXRlKCdlcnJvcicsIGZpZWxkSWQpO1xyXG4gICAgICAgICAgICBkaXNwbGF5RXJyb3JNZXNzYWdlKGZpZWxkc2V0SWQsIHRpcEN1c3RvbUZpZWxkLnZhbGlkYXRpb25NZXNzYWdlLCAnYmVmb3JlZW5kJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2V0RmllbGRTdGF0ZSgnc3VjY2VzcycsIGZpZWxkSWQpO1xyXG4gICAgICAgICAgICByZW1vdmVFcnJvck1lc3NhZ2VzKGZpZWxkc2V0SWQpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGJpbGxGaWVsZC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICBjb25zdCBmaWVsZElkID0gYmlsbEZpZWxkLmdldEF0dHJpYnV0ZSgnaWQnKTtcclxuXHJcbiAgICAgICAgaWYgKCFiaWxsRmllbGQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgICAgICAgc2V0RmllbGRTdGF0ZSgnZXJyb3InLCBmaWVsZElkKTtcclxuICAgICAgICAgICAgZGlzcGxheUVycm9yTWVzc2FnZShmaWVsZElkLCBiaWxsRmllbGQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNldEZpZWxkU3RhdGUoJ3N1Y2Nlc3MnLCBmaWVsZElkKTtcclxuICAgICAgICAgICAgcmVtb3ZlRXJyb3JNZXNzYWdlcyhmaWVsZElkKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBudW1iZXJPZlBlb3BsZUZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGZpZWxkSWQgPSBudW1iZXJPZlBlb3BsZUZpZWxkLmdldEF0dHJpYnV0ZSgnaWQnKTtcclxuXHJcbiAgICAgICAgaWYgKCFudW1iZXJPZlBlb3BsZUZpZWxkLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgICAgICAgIHNldEZpZWxkU3RhdGUoJ2Vycm9yJywgZmllbGRJZCk7XHJcbiAgICAgICAgICAgIGRpc3BsYXlFcnJvck1lc3NhZ2UoZmllbGRJZCwgbnVtYmVyT2ZQZW9wbGVGaWVsZC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2V0RmllbGRTdGF0ZSgnc3VjY2VzcycsIGZpZWxkSWQpO1xyXG4gICAgICAgICAgICByZW1vdmVFcnJvck1lc3NhZ2VzKGZpZWxkSWQpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59KTsiXSwibmFtZXMiOlsiZGlzcGxheUVycm9yTWVzc2FnZSIsImZpZWxkSWQiLCJtZXNzYWdlIiwicG9zaXRpb24iLCJlcnJvcklEIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicmVtb3ZlIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwicmVtb3ZlRXJyb3JNZXNzYWdlcyIsInNldEZpZWxkU3RhdGUiLCJzdGF0ZSIsImZpZWxkIiwiY2xhc3NMaXN0IiwiYWRkIiwiaXNGb3JtRW1wdHkiLCJ0aXBSYWRpbyIsIk51bWJlciIsInBhcnNlRmxvYXQiLCJ2YWx1ZSIsInRpcEN1c3RvbSIsImJpbGxGaWVsZCIsIm51bWJlck9mUGVvcGxlRmllbGQiLCJpc05hTiIsInVwZGF0ZUZvcm1TdGF0ZSIsImZvcm1JZCIsImZvcm0iLCJmb3JtUmVzZXQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJhZGRFdmVudExpc3RlbmVyIiwidGlwUmFkaW9GaWVsZHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwidGlwQ3VzdG9tRmllbGQiLCJ0aXBGb3JtIiwidGlwQW1vdW50RGl2IiwidG90YWxEaXYiLCJ0aXBGaWVsZHNldCIsImRpc3BsYXlSZXN1bHRzIiwiYmlsbCIsInRpcCIsInBlb3BsZSIsInRpcEFtb3VudCIsInRleHRDb250ZW50IiwidG9GaXhlZCIsImdldFRvdGFsUGVyUGVyc29uIiwiZm9yRWFjaCIsInRpcFJhZGlvRmllbGQiLCJlcnJvciIsInJlc2V0Rm9ybSIsImlucHV0IiwiY2hlY2tlZCIsImZpZWxkc2V0SWQiLCJnZXRBdHRyaWJ1dGUiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9